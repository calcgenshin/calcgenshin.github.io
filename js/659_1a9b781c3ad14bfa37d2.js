(()=>{"use strict";var t,e,s={87189:(t,e,s)=>{s.d(e,{c:()=>c});var r=s(24683),a=s(93962),i=(s(66196),s(76760)),o=s(9334);class c{constructor(t,e){this.stats=new i.j(e),this.settings=new o.q(t),this.multipliers=[],this.postEffects=[]}addStats(t){this.stats.concat(t)}addSettings(t){this.settings.concat(t)}getActivePostEffects(){return this.postEffects.filter((t=>t.isActive(this.settings)))}getActivePostEffectsTree(){let t=this.getActivePostEffects(),e=[];for(let s of t)if(s.getTree)for(let t of s.getTree(this))e.push(t);return e}applyPostEffects(t){for(let t of this.postEffectTreeByPriority()){let e=new a.x(new r.n1([]),t),s=e.compilePostTree({dontProcessStats:!0});s&&(this.stats.ensure(e.usedStats),this.stats.ensure(e.assignedStats),s(this.stats))}this.postEffects=[]}postEffectByPriority(t){t=Object.assign({},t);let e=this.getActivePostEffects(),s={};for(let r of e){let e=r.getPriority();t.maxPriority&&e>t.maxPriority||(s[e]||(s[e]=[]),s[e].push(r))}let r=[];for(let t of Object.keys(s).sort())r.push(s[t]);return r}postEffectTreeByPriority(t){let e=this.postEffectByPriority(t),s=[];for(let t of e){let e=[];for(let s of t)e=e.concat(s.getTree(this));s.push(e)}return s}getResistance(t){return this.settings.get("enemy_res_"+t)+100*this.stats.get("enemy_res_"+t)}clone(){let t=new c(this.settings,this.stats);return t.postEffects=[].concat(this.postEffects),t.multipliers=[].concat(this.multipliers),t}}},4919:(t,e,s)=>{var r=s(73935),a=s(61828),i=s(74053),o=s(58121);importScripts("db.js?3.1.3b");const c={flower:1,plume:2,sands:3,goblet:4,circlet:5};self.onmessage=function(t){let e,s=t.data.artifacts,l=a.G.deserialize(t.data.calcSet),n=t.data.feature,f=t.data.featureType,u=t.data.sortByFeature,p=t.data.sortByStat,h=t.data.setsOrders,g=[];u&&(e=l.getFeatureByName(n));let d=l.artifacts.getSettings(),y=l.getConditions({objects:"artifacts"}),m=i.g.allConditionsOff(y);Object.assign(m,d);for(let t of s){let s=r.v.deserialize(o.e.unpack(t)),a={hash:t,featureValue:0,statValue:0,setValue:h[s.getSet()],slotValue:c[s.getSlot()]};if(u&&e){let t=l.clone();t.setArtifact(s);let r=t.getConditions({objects:"artifacts"}),o=i.g.allConditionsOn(r),c=Object.assign({},o,m);t.setArtifactsSettings(c);let u=t.getBuildData(),p=e.getResult(u);p[n]&&(a.featureValue=p[n][f])}if(p){let t=s.calcStats();a.statValue=t.get(p)}g.push(a)}g=g.sort(((t,e)=>e.featureValue-t.featureValue||e.statValue-t.statValue||t.setValue-e.setValue||t.slotValue-e.slotValue)),self.postMessage({result:g.map((t=>t.hash))})}}},r={};function a(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={exports:{}};return s[t](i,i.exports,a),i.exports}a.m=s,a.x=()=>{var t=a.O(void 0,[651],(()=>a(4919)));return t=a.O(t)},t=[],a.O=(e,s,r,i)=>{if(!s){var o=1/0;for(n=0;n<t.length;n++){for(var[s,r,i]=t[n],c=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((t=>a.O[t](s[l])))?s.splice(l--,1):(c=!1,i<o&&(o=i));c&&(t.splice(n--,1),e=r())}return e}i=i||0;for(var n=t.length;n>0&&t[n-1][2]>i;n--)t[n]=t[n-1];t[n]=[s,r,i]},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce(((e,s)=>(a.f[s](t,e),e)),[])),a.u=t=>"js/"+t+"_edc88974b4af9385efeb.js",a.miniCssF=t=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t+"../"})(),(()=>{var t={659:1};a.f.i=(e,s)=>{t[e]||importScripts(a.p+a.u(e))};var e=self.webpackChunkgenshin_impact_calculator=self.webpackChunkgenshin_impact_calculator||[],s=e.push.bind(e);e.push=e=>{var[r,i,o]=e;for(var c in i)a.o(i,c)&&(a.m[c]=i[c]);for(o&&o(a);r.length;)t[r.pop()]=1;s(e)}})(),e=a.x,a.x=()=>a.e(651).then(e);a.x()})();