(()=>{"use strict";var t,e,s={87189:(t,e,s)=>{s.d(e,{c:()=>n});var i=s(24683),r=s(93962),o=(s(66196),s(76760)),a=s(9334);class n{constructor(t,e){this.stats=new o.j(e),this.settings=new a.q(t),this.multipliers=[],this.postEffects=[]}addStats(t){this.stats.concat(t)}addSettings(t){this.settings.concat(t)}getActivePostEffects(){return this.postEffects.filter((t=>t.isActive(this.settings)))}getActivePostEffectsTree(){let t=this.getActivePostEffects(),e=[];for(let s of t)if(s.getTree)for(let t of s.getTree(this))e.push(t);return e}applyPostEffects(t){for(let t of this.postEffectTreeByPriority()){let e=new r.x(new i.n1([]),t),s=e.compilePostTree({dontProcessStats:!0});s&&(this.stats.ensure(e.usedStats),this.stats.ensure(e.assignedStats),s(this.stats))}this.postEffects=[]}postEffectByPriority(t){t=Object.assign({},t);let e=this.getActivePostEffects(),s={};for(let i of e){let e=i.getPriority();t.maxPriority&&e>t.maxPriority||(s[e]||(s[e]=[]),s[e].push(i))}let i=[];for(let t of Object.keys(s).sort())i.push(s[t]);return i}postEffectTreeByPriority(t){let e=this.postEffectByPriority(t),s=[];for(let t of e){let e=[];for(let s of t)e=e.concat(s.getTree(this));s.push(e)}return s}getResistance(t){return this.settings.get("enemy_res_"+t)+100*this.stats.get("enemy_res_"+t)}clone(){let t=new n(this.settings,this.stats);return t.postEffects=[].concat(this.postEffects),t.multipliers=[].concat(this.multipliers),t}}},46443:(t,e,s)=>{var i=s(61828),r=s(74053);function o(t,e){let s=!1;for(const i of["normal","crit","average"])s||=Math.abs(e[i]-t[i])>1e-4;return s}importScripts("db.js?3.1.3b"),self.onmessage=function(t){let e=i.G.deserialize(t.data.calcset),s=t.data.feature,a=t.data.showBeta,n=0,c=e.getArtifacts(),f=e.getFeatureByName(s),l=f.isRotation();for(const t of Object.keys(c))c[t]&&++n;let g=function(t,e,s,i){let a=[],n=t.clone();n.artifacts.modifySets([]);let c=n.getFeatureByName(e);const f=n.getBuildData(),l=c.getResult(f)[e];for(const n of DB.Artifacts.Sets.getKeys(1)){let c=DB.Artifacts.Sets.get(n);if(c.maxRarity<5)continue;if(!i&&c.isBeta())continue;let f=c.getSuggesterData(),g=[],u=l,p=Math.min(s,f.length-1),h=[];for(let s=1;s<=p;++s){let i=f[s];if(h.push(n),i&&i.conditions){let a,n=t.clone();n.artifacts.modifySets(h),a=i.settings?i.settings:Object.assign({},r.g.allConditionsOn(n.artifacts.getConditions()));let c=Object.assign({},a);n.setArtifactsSettings(c);let f=n.getFeatureByName(e),l=n.getBuildData(),p=f.getResult(l)[e];o(u,p)&&(g.push({pieces:s,settings:a,setNames:[].concat(h)}),u=p)}}g.length>0&&a.push({setId:n,data:g})}return a}(e,s,n,a),u=[];for(let t=0;t<g.length;++t){const i=g[t];for(const r of i.data){let o=[].concat(r.setNames),a=e.clone();a.artifacts.modifySets(o);let c=Object.assign(r.settings);a.setArtifactsSettings(c);let p=a.getBuildData(),h=f.getResult(p)[s];u.push({feature:h,settings:c,sets:[{id:i.setId,pieces:r.pieces}]});for(let o=t+1;o<g.length;++o){const t=g[o];for(const o of t.data){if(r.pieces+o.pieces>n)continue;let g=[].concat(r.setNames,o.setNames);a=e.clone(),a.artifacts.modifySets(g);let p=Object.assign({},c,o.settings);a.setArtifactsSettings(p),l&&(f=a.compileRotation());let h=a.getBuildData(),d=f.getResult(h)[s];u.push({feature:d,settings:p,sets:[{id:i.setId,pieces:r.pieces},{id:t.setId,pieces:o.pieces}]})}}}}u=u.sort((function(t,e){return e.feature.average-t.feature.average})),self.postMessage({result:u})}}},i={};function r(t){var e=i[t];if(void 0!==e)return e.exports;var o=i[t]={exports:{}};return s[t](o,o.exports,r),o.exports}r.m=s,r.x=()=>{var t=r.O(void 0,[651],(()=>r(46443)));return t=r.O(t)},t=[],r.O=(e,s,i,o)=>{if(!s){var a=1/0;for(f=0;f<t.length;f++){for(var[s,i,o]=t[f],n=!0,c=0;c<s.length;c++)(!1&o||a>=o)&&Object.keys(r.O).every((t=>r.O[t](s[c])))?s.splice(c--,1):(n=!1,o<a&&(a=o));n&&(t.splice(f--,1),e=i())}return e}o=o||0;for(var f=t.length;f>0&&t[f-1][2]>o;f--)t[f]=t[f-1];t[f]=[s,i,o]},r.d=(t,e)=>{for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,s)=>(r.f[s](t,e),e)),[])),r.u=t=>"js/"+t+"_edc88974b4af9385efeb.js",r.miniCssF=t=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t+"../"})(),(()=>{var t={948:1};r.f.i=(e,s)=>{t[e]||importScripts(r.p+r.u(e))};var e=self.webpackChunkgenshin_impact_calculator=self.webpackChunkgenshin_impact_calculator||[],s=e.push.bind(e);e.push=e=>{var[i,o,a]=e;for(var n in o)r.o(o,n)&&(r.m[n]=o[n]);for(a&&a(r);i.length;)t[i.pop()]=1;s(e)}})(),e=r.x,r.x=()=>r.e(651).then(e);r.x()})();